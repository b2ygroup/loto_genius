<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loto Genius AI - Sua Sorte Inteligente</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">

    <script defer src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <script defer src="firebase-config.js"></script>
    <script defer src="script.js"></script>
</head>
<body>

    <div id="accessible-splash-screen" role="dialog" aria-modal="true" aria-labelledby="splash-title" aria-describedby="splash-status-message">
        <div class="splash-content-wrapper">
            <div class="splash-logo-tech" aria-hidden="true">
                <span class="char l">L</span><span class="char o1">o</span><span class="char t">t</span><span class="char o2">o</span>
                <span class="char g">G</span><span class="char e">e</span><span class="char n">n</span><span class="char i">i</span><span class="char u">u</span><span class="char s">s</span>
            </div>
            <h1 id="splash-title" class="splash-main-title" aria-live="polite">Loto Genius AI</h1>
            <p id="splash-status-message" class="splash-subtitle-message" aria-live="polite">Decifrando os segredos da sorte para você!</p>
            <div class="progress-bar-container" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progresso do carregamento">
                <div class="progress-bar-fill"></div>
            </div>
        </div>
    </div>

    <header role="banner">
        <div class="logo-container"><h1>Loto Genius AI</h1></div>
        <nav id="main-nav" style="display:none;" aria-label="Navegação Principal">
            <button id="nav-dashboard-btn" class="nav-item active" title="Painel Principal"><i class="fas fa-tachometer-alt" aria-hidden="true"></i> <span class="nav-text">Painel</span></button>
            <button id="nav-my-games-btn" class="nav-item" title="Meus Jogos"><i class="fas fa-ticket-alt" aria-hidden="true"></i> <span class="nav-text">Meus Jogos</span></button>
            <button id="nav-pools-btn" class="nav-item" title="Bolões"><i class="fas fa-users" aria-hidden="true"></i> <span class="nav-text">Bolões</span></button>
        </nav>
        <div id="auth-section" aria-label="Autenticação do Usuário">
            <button id="login-modal-btn" class="auth-btn">Login</button>
            <button id="register-modal-btn" class="auth-btn">Registrar</button>
            <div id="user-info" style="display:none;"><span id="user-email"></span><button id="logout-btn" class="auth-btn logout"><i class="fas fa-sign-out-alt"></i></button></div>
        </div>
    </header>

    <main id="app-content" style="display:none;" role="main">
        <section id="dashboard-section" class="main-section active-section" aria-labelledby="dashboard-title">
            <h2 id="dashboard-title" class="visually-hidden">Painel Principal e Geradores</h2>
            
            <section id="platform-highlights" class="card" aria-labelledby="platform-highlights-title">
                <h3 id="platform-highlights-title" class="card-title-accessible"><i class="fas fa-star" aria-hidden="true"></i> Loto Genius em Números</h3>
                <div class="highlights-grid">
                    <div class="highlight-item"><i class="fas fa-dice-d20" aria-hidden="true"></i><span id="stats-jogos-gerados" class="stat-number">--</span><p>Palpites Gerados</p></div>
                    <div class="highlight-item"><i class="fas fa-trophy" aria-hidden="true"></i><span id="stats-jogos-premiados" class="stat-number">--</span><p>Palpites Premiados (Estimativa)</p></div>
                    <div class="highlight-item"><i class="fas fa-sack-dollar" aria-hidden="true"></i><span id="stats-valor-premios" class="stat-number">R$ --</span><p>Prêmios Potenciais (Estimativa)</p></div>
                </div>
            </section>

            <div id="cosmic-promo-banner" class="card promo-banner" style="display:block;">
                <h3 class="promo-title"><i class="fas fa-meteor"></i> Descubra Seus Números da Sorte Cósmicos! <i class="fas fa-hat-wizard"></i></h3>
                <p class="promo-text">Use a sabedoria ancestral da numerologia e astrologia para gerar palpites únicos. Nossos algoritmos combinam esses conhecimentos para te ajudar a encontrar a sorte!</p>
                <p class="promo-cta"><strong>Registre-se ou faça login</strong> para ter acesso exclusivo a esta ferramenta e desvendar os mistérios dos números!</p>
                <div class="button-group" style="justify-content: center; margin-top:15px;">
                    <button class="action-btn primary-action" id="promo-register-btn">Quero Me Registrar!</button>
                    <button class="action-btn" id="promo-login-btn">Já Tenho Conta</button>
                </div>
            </div>
            
            <div class="ad-placeholder banner-top-dashboard carousel-ad" role="complementary" aria-label="Espaço para anúncio superior">
                <img src="https://placehold.co/728x90/1a1a2e/47aeff?text=Anuncio+Dinâmico+1&fontsize=16" alt="Anúncio 1" class="carousel-item active">
                <img src="https://placehold.co/728x90/162447/e0e0e0?text=Anuncio+Dinâmico+2&fontsize=16" alt="Anúncio 2" class="carousel-item">
                <img src="https://placehold.co/728x90/1f4068/ffffff?text=Anuncio+Dinâmico+3&fontsize=16" alt="Anúncio 3" class="carousel-item">
            </div>

            <div class="grid-container">
                <div class="card large-card" id="quick-hunch-card" aria-labelledby="quick-hunch-title">
                    <h2 id="quick-hunch-title"><i class="fas fa-bolt" aria-hidden="true"></i> Palpite Aleatório Rápido</h2>
                    <label for="quick-hunch-lottery-type">Selecione a Loteria:</label>
                    <select id="quick-hunch-lottery-type">
                        <option value="megasena">Mega-Sena</option>
                        <option value="lotofacil">Lotofácil</option>
                        <option value="lotomania">Lotomania</option>
                        <option value="quina">Quina</option>
                    </select>
                    <div class="button-group">
                        <button id="generate-quick-hunch-btn" class="action-btn primary-action"><i class="fas fa-random" aria-hidden="true"></i> Gerar Palpite Rápido</button>
                    </div>
                    <div id="quick-hunch-output" class="game-card" style="display:none; margin-top: 1rem;" aria-live="polite">
                        <h4><i class="fas fa-lightbulb" aria-hidden="true"></i> Seu Palpite Rápido:</h4>
                        <div id="quick-hunch-numbers" class="game-numbers"></div>
                        <p id="quick-hunch-strategy" class="strategy-text"></p>
                        <div class="game-card-actions">
                            <button id="save-quick-hunch-btn" class="action-btn small-btn" title="Salvar este jogo" style="display:none;"><i class="fas fa-save"></i> Salvar</button>
                            <button id="check-quick-hunch-btn" class="action-btn small-btn" title="Conferir este jogo" style="display:none;"><i class="fas fa-check-circle"></i> Conferir</button>
                        </div>
                        <div id="quick-hunch-check-result" class="check-result-display"></div>
                    </div>
                </div>

                <div class="card large-card" id="esoteric-hunch-card" style="display:none;" aria-labelledby="esoteric-title">
                    <h2 id="esoteric-title"><i class="fas fa-hat-wizard" aria-hidden="true"></i> Palpites Cósmicos & Numerológicos <span class="premium-tag">(Exclusivo Assinantes)</span></h2>
                    <label for="esoteric-lottery-type">Selecione a Loteria:</label>
                    <select id="esoteric-lottery-type">
                        <option value="megasena">Mega-Sena</option>
                        <option value="lotofacil">Lotofácil</option>
                        <option value="lotomania">Lotomania</option>
                        <option value="quina">Quina</option>
                    </select>
                    <label for="birth-date-input">Sua Data de Nascimento (DDMMAAAA):</label>
                    <input type="text" id="birth-date-input" placeholder="Ex: 25121990" maxlength="8" inputmode="numeric" pattern="\d{8}">
                    <div class="button-group">
                        <button id="generate-esoteric-hunch-btn" class="action-btn primary-action"><i class="fas fa-meteor"></i> Gerar Palpite Cósmico</button>
                    </div>
                    <div id="esoteric-hunch-output" class="game-card" style="display:none; margin-top: 1rem;" aria-live="polite">
                        <h4><i class="fas fa-wand-sparkles" aria-hidden="true"></i> Seu Palpite Cósmico:</h4>
                        <div id="esoteric-hunch-numbers" class="game-numbers"></div>
                        <p id="esoteric-hunch-method" class="strategy-text"></p>
                        <div id="esoteric-hunch-history-check" class="check-result-display" style="margin-top: 0.5rem; font-size: 0.85em;"></div>
                         <div class="game-card-actions">
                            <button id="save-esoteric-hunch-btn" class="action-btn small-btn" title="Salvar este jogo" style="display:none;"><i class="fas fa-save"></i> Salvar</button>
                            <button id="check-esoteric-hunch-btn" class="action-btn small-btn" title="Conferir este jogo" style="display:none;"><i class="fas fa-check-circle"></i> Conferir</button>
                        </div>
                    </div>
                </div>
                
                <div class="card" id="results-display-card" aria-labelledby="results-title">
                    <h3 id="results-title"><i class="fas fa-poll" aria-hidden="true"></i> Últimos Resultados</h3>
                    <div class="results-header">
                        <span id="results-lottery-name">Mega-Sena</span> 
                        <button id="fetch-results-btn" class="action-btn small-btn refresh-btn" title="Atualizar Resultados"><i class="fas fa-sync-alt"></i></button>
                    </div>
                    <pre id="api-results" class="code-block" aria-live="polite">Selecione uma loteria no "Palpite Rápido" e clique em atualizar.</pre>
                </div>
                
                <div class="card" id="manual-game-probability-card" aria-labelledby="manual-game-prob-title">
                    <h3 id="manual-game-prob-title"><i class="fas fa-calculator"></i> Probabilidade do Meu Jogo</h3>
                    <label for="manual-prob-lottery-type">Selecione a Loteria:</label>
                    <select id="manual-prob-lottery-type">
                        <option value="megasena" data-count="6" data-min="1" data-max="60">Mega-Sena (6 números de 1-60)</option>
                        <option value="lotofacil" data-count="15" data-min="1" data-max="25">Lotofácil (15 números de 1-25)</option>
                        <option value="lotomania" data-count="50" data-min="0" data-max="99">Lotomania (Aposta 50 de 0-99)</option>
                        <option value="quina" data-count="5" data-min="1" data-max="80">Quina (5 números de 1-80)</option>
                    </select>
                    <label for="manual-prob-user-numbers">Seus números (separados por vírgula):</label>
                    <textarea id="manual-prob-user-numbers" rows="3" placeholder="Ex: 01,02,03,04,05,06"></textarea>
                    <p id="manual-prob-numbers-count-feedback" class="input-feedback">Números: 0 de 6.</p>
                    <button id="manual-calculate-prob-btn" class="action-btn primary-action"><i class="fas fa-percent"></i> Calcular Probabilidade</button>
                    <div id="manual-probability-result-display" class="result-display-box" style="margin-top:15px;">
                        Aguardando seu jogo...
                    </div>
                </div>
            </div>

            <div class="grid-container-side">
                <section id="winning-pools-preview" class="card" aria-labelledby="winning-pools-title">
                    <h3 id="winning-pools-title"><i class="fas fa-users-crown"></i> Bolões Premiados (Simulado)</h3>
                    <ul id="recent-pools-list"><li><div class="spinner small-spinner"></div></li></ul>
                </section>
                <section id="top-winners-preview" class="card" aria-labelledby="top-winners-title">
                    <h3 id="top-winners-title"><i class="fas fa-medal"></i> Top Ganhadores (Simulado)</h3>
                    <ol id="top-winners-list"><li><div class="spinner small-spinner"></div></li></ol>
                </section>
                <div class="card" id="frequency-stats-card" aria-labelledby="frequency-stats-title">
                    <h3 id="frequency-stats-title"><i class="fas fa-sort-numeric-up-alt"></i> Mais Sorteados (<span id="freq-stats-lottery-name">Mega-Sena</span>)</h3>
                    <div id="frequency-list-container" class="stats-list-container"><p class="loading-stats"><div class="spinner small-spinner"></div></p></div>
                </div>
                <div class="card" id="pair-frequency-stats-card" aria-labelledby="pair-frequency-stats-title">
                    <h3 id="pair-frequency-stats-title"><i class="fas fa-project-diagram"></i> Pares Frequentes (<span id="pair-freq-stats-lottery-name">Mega-Sena</span>)</h3>
                    <div id="pair-frequency-list-container" class="stats-list-container"><p class="loading-stats"><div class="spinner small-spinner"></div></p></div>
                </div>
                 <div class="card" id="city-stats-card" aria-labelledby="city-stats-title">
                    <h3 id="city-stats-title"><i class="fas fa-city"></i> Cidades Premiadas (<span id="city-stats-lottery-name">Mega-Sena</span>)</h3>
                    <p class="stats-subtitle">(Ganhadores do prêmio principal)</p>
                    <div id="city-list-container" class="stats-list-container"><p class="loading-stats"><div class="spinner small-spinner"></div></p></div>
                </div>
                <div class="card" id="city-prize-sum-card" aria-labelledby="city-prize-sum-title">
                    <h3 id="city-prize-sum-title"><i class="fas fa-hand-holding-usd"></i> Prêmios por Cidade (<span id="city-prize-sum-lottery-name">Mega-Sena</span>)</h3>
                    <p class="stats-subtitle">(Soma dos prêmios principais)</p>
                    <div id="city-prize-sum-list-container" class="stats-list-container"><p class="loading-stats"><div class="spinner small-spinner"></div></p></div>
                </div>
            </div>
            <div class="ad-placeholder banner-bottom-dashboard carousel-ad" role="complementary" aria-label="Espaço para anúncio inferior">
                <img src="https://placehold.co/300x250/1a1a2e/be93f9?text=Palpites+Cósmicos+Te+Aguardam!&fontsize=14" alt="Anúncio Palpites Cósmicos 1" class="carousel-item active">
                <img src="https://placehold.co/300x250/162447/ffd700?text=Numerologia+Exclusiva+para+Membros!+Registre-se+Já!&fontsize=12" alt="Anúncio Palpites Cósmicos 2" class="carousel-item">
            </div>
        </section>

        <section id="my-games-section" class="main-section" aria-labelledby="my-games-title">
            <h2 id="my-games-title"><i class="fas fa-history" aria-hidden="true"></i> Meus Jogos Salvos</h2>
            <div id="saved-games-filters" style="margin-bottom: 1rem; display:flex; gap:10px; align-items:center;">
                <label for="filter-lottery-mygames">Filtrar:</label>
                <select id="filter-lottery-mygames" aria-label="Filtrar jogos salvos por loteria">
                    <option value="todos">Todas</option>
                    <option value="megasena">Mega-Sena</option><option value="lotofacil">Lotofácil</option>
                    <option value="lotomania">Lotomania</option><option value="quina">Quina</option>
                </select>
            </div>
            <div id="saved-games-container" class="grid-container cards-display">
                <p id="no-saved-games" style="display:none;">Você ainda não tem jogos salvos.</p>
            </div>
        </section>
        <section id="pools-section" class="main-section" aria-labelledby="pools-title">
             <h2 id="pools-title"><i class="fas fa-users"></i> Bolões Comunitários</h2>
             <p>Em breve: Crie e participe de bolões inteligentes para aumentar suas chances!</p>
        </section>
    </main>

    <div id="login-modal" class="modal" role="dialog" aria-labelledby="login-modal-title" aria-modal="true">
        <div class="modal-content">
            <button class="close-btn" id="close-login-modal" aria-label="Fechar modal de login">&times;</button>
            <h2 id="login-modal-title">Login</h2>
            <label for="login-email" class="visually-hidden">Email</label>
            <input type="email" id="login-email" placeholder="Seu Email" required aria-required="true">
            <label for="login-password" class="visually-hidden">Senha</label>
            <input type="password" id="login-password" placeholder="Sua Senha" required aria-required="true">
            <button id="login-submit-btn" class="modal-btn">Entrar</button>
            <p id="login-error" class="error-message" aria-live="assertive"></p>
        </div>
    </div>

    <div id="register-modal" class="modal" role="dialog" aria-labelledby="register-modal-title" aria-modal="true">
        <div class="modal-content">
            <button class="close-btn" id="close-register-modal" aria-label="Fechar modal de registro">&times;</button>
            <h2 id="register-modal-title">Criar Conta</h2>
            <label for="register-email" class="visually-hidden">Email</label>
            <input type="email" id="register-email" placeholder="Seu Email" required aria-required="true">
            <label for="register-password" class="visually-hidden">Senha</label>
            <input type="password" id="register-password" placeholder="Crie uma Senha (mín. 6 caracteres)" required aria-required="true">
            <label for="register-confirm-password" class="visually-hidden">Confirme a Senha</label>
            <input type="password" id="register-confirm-password" placeholder="Confirme a Senha" required aria-required="true">
            <button id="register-submit-btn" class="modal-btn">Registrar</button>
            <p id="register-error" class="error-message" aria-live="assertive"></p>
        </div>
    </div>

    <footer role="contentinfo">
        <p>&copy; <span id="current-year"></span> Loto Genius AI. Jogue com consciência e responsabilidade.</p>
    </footer>
    <div id="global-error-msg" role="alert" aria-live="assertive"></div>
    <div id="confetti-canvas" aria-hidden="true"></div>

</body>
</html>